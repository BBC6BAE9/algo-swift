# 2.2.3 B树（B-tree）

`B树` 是一种平衡的多路搜索树，用于文件系统和数据库的实现。

特点：

- 一个节点可以存储超过两个元素，可以拥有超过两个字节点
- 拥有二叉搜索树的一些性质

- 平衡，每个字节点和所有子树的高度一致
- 比较矮

M阶B树（M>=2）性质：

> 一个节点最多拥有M个子节点

假设一个几点存储的元素个数为x

根结点： 1<= x <= m-1（例如3阶B树根节点的阶数事1，2）

非根结点：ceil(m/2) -1 <= x <= m-1

> 比如m=3， 2<= y <=3， 因此可以称为(2, 3)树，2-3树
>
> 比如m=4， 2<= y <=4，， 因此可以称为(2, 4)树，2-3-4树
>
> 比如m=5， 3<= y <=5，， 因此可以称为(3, 5)树
>
> 比如m=5， 3<= y <=6，， 因此可以称为(3, 6)树
>
> 比如m=7， 4<= y <=7，， 因此可以称为(4, 7)树

 如果m=2，那么B树退化称为搜索二叉树

B树和搜索二叉树在逻辑上是等价的

多代节点合并，可以获得一个超级节点

2代（父子两代）合并的超级节点，最多又有4个字节点（至少是4阶B数）

3代（祖孙三代）合并的超级节点，最多又有4个字节点（至少是4阶B数）

n代合并的超级节点，最多拥有2的N次方节点（至少是2的n次方阶B数）


m阶B树，最多需要log2m代合并


## 搜索

1、现在节点内部从小到达开始搜索元素

2、如果命中，搜索结束

3、如果未命中，再去对应的字节点中搜索元素，重复步骤1

## 添加

新添加的元素必定是添加到叶子节点





## 删除

如果是叶子节点，直接删除即可

如果不是叶子节点

1、先找到前驱或者后记元素，覆盖所需删除元素的值

2、再把前驱或后继元素删除



> 非叶子节点的前驱或者后继元素，必定在叶子节点中



## 4阶B树

如果先学习4阶B树（2-3-4树），将能更好地学习理解红黑树

`4阶B树`的性质

- 所有的节点能存储的元素个数x: 1<= x <= 3
- 所有非叶子节点的子节点个数y: 2<= y <= 4

练习1: 从1添加到22，画出这个B树

